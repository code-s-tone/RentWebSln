@model MemberPersonDataViewModel

@{
    ViewBag.Title = "MemberCenter";
    var IsNotPassword = "";
    if (ViewBag.IsNotHasPassword == "Null")
    {
        IsNotPassword = "Yes";
    }
    else
    {
        IsNotPassword = "No";
    }
}

<div class="member-center-container-outsidestyle">
    <div class="member-center-container">
        <div class="member-display-block">
            <!--檔案重新上傳-->
            <!-- BS新版 -->
            <!--欄位區-->
            <h2 class="member-display-title">訂單查詢</h2>
            @if (IsNotPassword == "Yes")
            {
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link select-hover active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">個人資料</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link select-hover" id="profile-tab" data-bs-toggle="tab" data-bs-target="#order-search" type="button" role="tab" aria-controls="order-search" aria-selected="false">訂單查詢</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link select-hover" id="contact-tab" data-bs-toggle="tab" data-bs-target="#car-order" type="button" role="tab" aria-controls="car-order" aria-selected="false">待購清單</button>
                    </li>
                </ul>
            }
            else if (IsNotPassword == "No")

            {
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link select-hover active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">個人資料</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link select-hover" id="account-tab" data-bs-toggle="tab" data-bs-target="#account" type="button" role="tab" aria-controls="account" aria-selected="false">帳號管理</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link select-hover" id="profile-tab" data-bs-toggle="tab" data-bs-target="#order-search" type="button" role="tab" aria-controls="order-search" aria-selected="false">訂單查詢</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link select-hover" id="contact-tab" data-bs-toggle="tab" data-bs-target="#car-order" type="button" role="tab" aria-controls="car-order" aria-selected="false">待購清單</button>
                    </li>
                </ul>
            }


            @*原始表單區塊*@

            <div class="tab-content" id="myTabContent">
                <!-- 個人資料 -->
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <div class="member-display-person-detail member-display-group">

                        <!--這是換頭像的東西-->
                        <input class="efg" type="file" id="file2">
                        <span class="member-display-header member-display-new-email-context my-3">頭像</span>
                        <div class="member-display-name-container member-display-item d-flex position-relative" style="width:100px;height:100px">
                            <img style="width:100px;height:100px" class="border  rounded-0 shadow-sm Profile2" src="" />
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary"><i class="fas fa-camera d-block " style="color:aliceblue" type="file" name="file" id="file"></i> <span class="visually-hidden">unread messages</span></span>
                        </div>


                        @ViewBag.returnPerson
                        <!--個人資料Form-->
                        @using (Html.BeginForm("MemberPerson", "Member", FormMethod.Post))
                        {
                            <!--姓氏-->
                            <div class="member-display-name-container member-display-item">
                                <div class="member-display-header">姓氏與名字</div>
                                <div class="member-display-name-input-box-first">
                                    @Html.EditorFor(m => m.MemberName, new { @htmlAttributes = new { @class = "member-display-lastname member-person-input inputDisabled", @placeholder = "姓名" } })
                                </div>
                                <div class="text-danger small mb-2 name-error-msg"></div>
                            </div>
                            <div class="member-display-born-container member-display-item">
                                <div class="member-display-header">生日</div>
                                <div class="member-display-birthday-group">
                                    <div class="member-display-name-input-box-first">
                                        @Html.EditorFor(m => m.MemberYear, new { @htmlAttributes = new { @class = "member-display-year member-person-input inputDisabled", @placeholder = "Year" } })
                                    </div>
                                    <div class="member-display-name-input-box-first">
                                        @Html.EditorFor(m => m.MemberMonth, new { @htmlAttributes = new { @class = "member-display-month member-person-input inputDisabled", @placeholder = "Month" } })
                                    </div>
                                    <div class="member-display-name-input-box-first">
                                        @Html.EditorFor(m => m.MemberDay, new { @htmlAttributes = new { @class = "member-display-date member-person-input inputDisabled", @placeholder = "Day" } })
                                    </div>
                                </div>
                                <div class="text-danger small mb-2 year-error-msg"></div>
                                <div class="text-danger small mb-2 month-error-msg"></div>
                                <div class="text-danger small mb-2 day-error-msg"></div>
                            </div>

                            <!--性別 戰略性暫時移除-->
                            <!--
                    <div class="member-display-radio-container member-display-item">
                        <div class="member-display-header">性別</div>
                        <div class="member-display-gender-textContent">男</div>
                        <div class="radio-men member-display-person-style">
                            <input type="radio" name="gender" id="gender">
                            <label class="member-display-header" for="text">男</label>
                            <i class="fas fa-male"></i>
                        </div>
                        <div class="radio-women member-display-person-style">
                            <input type="radio" name="gender" id="gender">
                            <label class="member-display-header" for="text">女</label>
                            <i class="fas fa-female"></i>
                        </div>
                    </div>
                        -->

                            <!--電話-->
                            <div class="member-display-phone-container member-display-item">
                                <div class="member-display-header">電話號碼</div>
                                <div class="member-display-phone-group">
                                    <div class="member-display-name-input-box-first">
                                        <input type="text" class="member-display-block-num" name="block" value="+886" placeholder="區域碼" data-max="10">
                                    </div>
                                    <div class="member-display-name-input-box-last">
                                        @Html.EditorFor(m => m.MemberPhone, new { @htmlAttributes = new { @class = "member-display-num member-person-input inputDisabled", @placeholder = "電話" } })
                                    </div>
                                </div>
                                <div class="text-danger small mb-2 phone-error-msg"></div>
                            </div>

                            <!--喜好門市-->
                            <div class="member-display-shop-container member-display-item">
                                <div class="member-display-shop-group">
                                    <div class="member-display-header">喜好門市</div>
                                    <select class="member-display-shop" name="shop">
                                        <option value="門市選項">門市選項</option>
                                        @*@foreach (var item in Model.MemberBranchName)
                                    {
                                        <option value="@item">@item</option>
                                    }*@
                                    </select>
                                </div>
                            </div>

                            <div class="member-display-button-groups">
                                <div class="member-display-shop-container">
                                    <div class="member-display-button-group member-display-cancel-deit">
                                        <button type="button" class="member-display-button-item memberperson-cancel-edit">取消修改</button>
                                    </div>
                                    <div class="member-display-button-group">
                                        <button type="button" class="member-display-button-item memberperson-button-edit">修改</button>
                                    </div>
                                </div>
                                <div class="member-display-shop-container">
                                    <div class="member-display-button-group">
                                        <button type="submit" class="member-display-button-item memberperson-button-save">儲存</button>
                                    </div>
                                </div>
                            </div>

                        }


                    </div>
                </div>



                <!--信箱 / 密碼Form-->
                <div class="tab-pane fade" id="account" role="tabpanel" aria-labelledby="profile-tab">
                    @if (IsNotPassword == "Yes")
                    { 
                        <div class="member-display-person-detail member-display-account-detail member-display-group notDisplay">
                        @ViewBag.returnEmail
                        @using (Html.BeginForm("MemberEmail", "Member", FormMethod.Post))
                        {
                            <div class="member-display-name-container member-display-item">
                                <div class="member-display-header member-display-new-email-context">電子信箱地址</div>
                                <div class="member-display-service-email">
                                    @Html.DisplayFor(m => m.MemberEmail, new { htmlAttributes = new { @class = "border border-white rounded" } })
                                </div>
                            </div>

                            <div id="email">
                                <div class="member-display-name-container member-display-item member-changeEmail-item">
                                    <div class="member-display-new-email-context">
                                        <div class="member-display-header">請輸入新電子信箱地址</div>
                                    </div>
                                    <div class="member-display-name-input-box-last">
                                        <div class="member-display-email-container member-email-clear">
                                            @Html.EditorFor(m => m.MemberEmail, new { @htmlAttributes = new { @class = "member-display-new-email member-email-clear", @placeholder = "新電子信箱" } })
                                            @*<input v-model="inputData.email" class="member-display-new-email member-email-clear" placeholder="新電子信箱">*@
                                        </div>
                                        <div class="text-danger small mb-2 email-danger"></div>
                                    </div>
                                    @*@Html.ValidationMessageFor(m => m.MemberEmail, "", new { @class = "text-danger" })*@
                                </div>
                                <div class="member-display-name-container member-display-item member-changeEmail-item">
                                    <div class="member-display-new-email-context">
                                        <div class="member-display-header">請再輸入新電子信箱地址</div>
                                    </div>
                                    <div class="member-display-name-input-box-last ">
                                        <div class="member-display-email-container member-email-clear">
                                            @Html.EditorFor(m => m.ComfirMemberEmail, new { htmlAttributes = new { @class = "member-display-doublecheck-email member-email-clear", @placeholder = "再輸入一次新電子信箱" } })
                                        </div>
                                        <div class="text-danger small mb-2 checkemail-danger"></div>
                                    </div>
                                    @*@Html.ValidationMessageFor(m => m.ComfirMemberEmail, "", new { @class = "text-danger" })*@
                                </div>
                                <div class="member-display-button-groups">
                                    <div class="member-display-shop-container">
                                        <div class="member-display-button-group member-display-cancel-deit">
                                            <button type="button" class="member-display-button-item memberemail-cancel-edit">取消修改</button>
                                        </div>
                                        <div class="member-display-button-group">
                                            <button type="button" class="member-display-button-item memberemail-button-edit">修改信箱</button>
                                        </div>
                                    </div>
                                    <div class="member-display-shop-container">
                                        <div class="member-display-button-group">
                                            <button type="submit" class="member-display-button-item memberemail-button-save">儲存變更</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                        <!--變更密碼Form-->
                        @ViewBag.returnPassword
                        @using (Html.BeginForm("MemberPassword", "Member", FormMethod.Post))
                        {
                            <div class="member-display-name-container member-display-item">
                                @*<div class="member-display-header member-display-new-email-context">修改密碼</div>*@

                            </div>
                            <div class="member-display-name-container member-display-item member-changePassword-item">
                                <div class="member-display-new-email-context">
                                    <div class="member-display-header">請輸入新密碼</div>

                                </div>
                                <div class="member-display-name-input-box-last">
                                    <div class="member-display-email-container">
                                        @Html.EditorFor(m => m.MemberPasswordHash, new { htmlAttributes = new { @class = "member-display-new-password member-display-new-email" } })
                                    </div>
                                </div>
                                @*@Html.ValidationMessageFor(m => m.MemberPasswordHash, "", new { @class = "text-danger" })*@
                                <div class="text-danger small mb-2 password-danger"></div>
                            </div>
                            <div class="member-display-name-container member-display-item member-changePassword-item">
                                <div class="member-display-new-email-context">
                                    <div class="member-display-header">再輸入新密碼</div>
                                </div>
                                <div class="text-danger small mb-2 password-danger"></div>
                                <div class="member-display-name-input-box-last">
                                    <div class="member-display-email-container">
                                        @Html.EditorFor(m => m.ComfigMemberPasswordHash, new { htmlAttributes = new { @class = "member-display-doublecheck-password member-display-new-email" } })
                                    </div>
                                </div>
                                @*@Html.ValidationMessageFor(m => m.ComfigMemberPasswordHash, "", new { @class = "text-danger" })*@
                                <div class="text-danger small mb-2 check-password-danger"></div>
                            </div>

                            <div class="member-display-button-groups">
                                <div class="member-display-shop-container">
                                    <div class="member-display-button-group member-display-cancel-deit">
                                        <button type="button" class="member-display-button-item memberpassword-cancel-edit">取消修改</button>
                                    </div>
                                    <div class="member-display-button-group">
                                        <button type="button" class="member-display-button-item memberpassword-button-edit">修改密碼</button>
                                    </div>
                                </div>
                                <div class="member-display-shop-container">
                                    <div class="member-display-button-group">
                                        <button type="submit" class="member-display-button-item memberpassword-button-save">儲存變更</button>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    }


                    else if(IsNotPassword == "No")
                    {
                        <div class="member-display-person-detail member-display-account-detail member-display-group">
                        @ViewBag.returnEmail
                        @using (Html.BeginForm("MemberEmail", "Member", FormMethod.Post))
                        {
                            <div class="member-display-name-container member-display-item">
                                <div class="member-display-header member-display-new-email-context">電子信箱地址</div>
                                <div class="member-display-service-email">
                                    @Html.DisplayFor(m => m.MemberEmail, new { htmlAttributes = new { @class = "border border-white rounded" } })
                                </div>
                            </div>

                            <div id="email">
                                <div class="member-display-name-container member-display-item member-changeEmail-item">
                                    <div class="member-display-new-email-context">
                                        <div class="member-display-header">請輸入新電子信箱地址</div>
                                    </div>
                                    <div class="member-display-name-input-box-last">
                                        <div class="member-display-email-container member-email-clear">
                                            @Html.EditorFor(m => m.MemberEmail, new { @htmlAttributes = new { @class = "member-display-new-email member-email-clear", @placeholder = "新電子信箱" } })
                                            @*<input v-model="inputData.email" class="member-display-new-email member-email-clear" placeholder="新電子信箱">*@
                                        </div>
                                        <div class="text-danger small mb-2 email-danger"></div>
                                    </div>
                                    @*@Html.ValidationMessageFor(m => m.MemberEmail, "", new { @class = "text-danger" })*@
                                </div>
                                <div class="member-display-name-container member-display-item member-changeEmail-item">
                                    <div class="member-display-new-email-context">
                                        <div class="member-display-header">請再輸入新電子信箱地址</div>
                                    </div>
                                    <div class="member-display-name-input-box-last ">
                                        <div class="member-display-email-container member-email-clear">
                                            @Html.EditorFor(m => m.ComfirMemberEmail, new { htmlAttributes = new { @class = "member-display-doublecheck-email member-email-clear", @placeholder = "再輸入一次新電子信箱" } })
                                        </div>
                                        <div class="text-danger small mb-2 checkemail-danger"></div>
                                    </div>
                                    @*@Html.ValidationMessageFor(m => m.ComfirMemberEmail, "", new { @class = "text-danger" })*@
                                </div>
                                <div class="member-display-button-groups">
                                    <div class="member-display-shop-container">
                                        <div class="member-display-button-group member-display-cancel-deit">
                                            <button type="button" class="member-display-button-item memberemail-cancel-edit">取消修改</button>
                                        </div>
                                        <div class="member-display-button-group">
                                            <button type="button" class="member-display-button-item memberemail-button-edit">修改信箱</button>
                                        </div>
                                    </div>
                                    <div class="member-display-shop-container">
                                        <div class="member-display-button-group">
                                            <button type="submit" class="member-display-button-item memberemail-button-save">儲存變更</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                        <!--變更密碼Form-->
                        @ViewBag.returnPassword
                        @using (Html.BeginForm("MemberPassword", "Member", FormMethod.Post))
                        {
                            <div class="member-display-name-container member-display-item">
                                @*<div class="member-display-header member-display-new-email-context">修改密碼</div>*@

                            </div>
                            <div class="member-display-name-container member-display-item member-changePassword-item">
                                <div class="member-display-new-email-context">
                                    <div class="member-display-header">請輸入新密碼</div>

                                </div>
                                <div class="member-display-name-input-box-last">
                                    <div class="member-display-email-container">
                                        @Html.EditorFor(m => m.MemberPasswordHash, new { htmlAttributes = new { @class = "member-display-new-password member-display-new-email" } })
                                    </div>
                                </div>
                                @*@Html.ValidationMessageFor(m => m.MemberPasswordHash, "", new { @class = "text-danger" })*@
                                <div class="text-danger small mb-2 password-danger"></div>
                            </div>
                            <div class="member-display-name-container member-display-item member-changePassword-item">
                                <div class="member-display-new-email-context">
                                    <div class="member-display-header">再輸入新密碼</div>
                                </div>
                                <div class="text-danger small mb-2 password-danger"></div>
                                <div class="member-display-name-input-box-last">
                                    <div class="member-display-email-container">
                                        @Html.EditorFor(m => m.ComfigMemberPasswordHash, new { htmlAttributes = new { @class = "member-display-doublecheck-password member-display-new-email" } })
                                    </div>
                                </div>
                                @*@Html.ValidationMessageFor(m => m.ComfigMemberPasswordHash, "", new { @class = "text-danger" })*@
                                <div class="text-danger small mb-2 check-password-danger"></div>
                            </div>

                            <div class="member-display-button-groups">
                                <div class="member-display-shop-container">
                                    <div class="member-display-button-group member-display-cancel-deit">
                                        <button type="button" class="member-display-button-item memberpassword-cancel-edit">取消修改</button>
                                    </div>
                                    <div class="member-display-button-group">
                                        <button type="button" class="member-display-button-item memberpassword-button-edit">修改密碼</button>
                                    </div>
                                </div>
                                <div class="member-display-shop-container">
                                    <div class="member-display-button-group">
                                        <button type="submit" class="member-display-button-item memberpassword-button-save">儲存變更</button>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    }
                </div>

                <!-- 歷史訂單 -->
                @*@using (Html.BeginForm("MemberCenter", "Member", FormMethod.Post))
            {

            }*@
                <div class="tab-pane fade" id="order-search" role="tabpanel" aria-labelledby="contact-tab">
                    <div class="member-display-title member-display-order-title">
                        <span class="member-display-order-item">店家</span>
                        <span class="member-display-order-item">租期</span>
                        <span class="member-display-order-item">金額</span>
                        <span class="member-display-order-item">交易日期</span>
                        <span class="member-display-order-item member-display-order-item-show">內容</span>
                    </div>
                    @foreach (var item in Model.MemberOrderDetail)
                    {
                        <div class="member-display-order-detail-container">
                            <div class="member-display-title member-display-order-detail">
                                <span class="member-display-order-item member-display-order-show">@item.BranchName</span>
                                <span class="member-display-order-item
                            member-display-order-day">@item.RentDate 天</span>
                            <span class="member-display-order-item
                            member-display-order-dynamic-total">NT$@item.TotalAmount</span>
                            <span class="member-display-order-item
                            member-display-order-day">@item.StartDate.AddYears(-1911).ToString("yyy/MM/dd")</span>
                            <span class="member-display-order-item-show-button member-display-order-item-show-dynamic-button">+</span>
                        </div>
                        <div class="member-display-order-detail-list">
                            <span class="member-display-order-item member-display-order-name">租賃商品</span>
                            <span class="member-display-order-item
                                member-display-order-return-day">歸還日</span>
                            <span class="member-display-order-item
                                member-display-order-price">單價</span>
                            <span class="member-display-order-item
                                member-display-order-amount">數量</span>
                            <span class="member-display-order-item
                                member-display-order-total">總計</span>
                            <span class="member-display-order-item member-display-order-dynamic-name">@item.ProductName</span>
                            <span class="member-display-order-item
                                member-display-order-dynamic-return-day">@item.ExpirationDate.AddYears(-1911).ToString("yyy/MM/dd")</span>
                                <span class="member-display-order-item
                                member-display-order-dynamic-price">@item.DailyRate</span>
                                <span class="member-display-order-item
                                member-display-order-dynamic-amount">1</span>
                                <span class="member-display-order-item
                                member-display-order-dynamic-total">NT$@item.TotalAmount</span>
                            </div>
                        </div>
                    }
                </div>
                <!-- 購物車 -->
                <div class="tab-pane fade" id="car-order" role="tabpanel" aria-labelledby="car-order">

                </div>
            </div>





        </div>
    </div>
</div>


@section topCSS{
    <link href="~/Assets/css/MemberCenter/reset.css" rel="stylesheet" />
    <link href="~/Assets/css/MemberCenter/member.css" rel="stylesheet" />
    <link href="~/Assets/css/MemberCenter/account.css" rel="stylesheet" />
    <link href="~/Assets/css/MemberCenter/order.css" rel="stylesheet" />
    <link href="~/Assets/css/MemberCenter/memberJS.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    <link href="~/Assets/css/MemberCenter/ProfilePhoto.css" rel="stylesheet" />
}



@section endJS{
    <script src="~/Assets/js/MemberCenter/Order/script.js"></script>
    <script src="~/Assets/js/MemberCenter/ChangeProfile/profile.js"></script>
    <script src="~/Assets/js/MemberCenter/ProfilePhoto.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-eMNCOe7tC1doHpGoWe/6oMVemdAVTMs2xqW4mwXrXsW0L84Iytr2wi5v2QjrP/xp" crossorigin="anonymous"></script>
    <script>

            $(".nav-link")[@ViewBag.nav].click()



    </script>

}

@* 前端驗證 *@
@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")
}

